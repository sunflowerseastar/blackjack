(ns ^:figwheel-hooks cards.core
  (:require
   [goog.dom :as gdom]
   [reagent.core :as reagent :refer [atom]]))

(def cards (atom (for [suit ['s 'c 'd 'h] rank [2 3 4 5 6 7 8 9 10 11 12 13 14]] {:suit suit :rank rank})))

(defn get-app-element []
  (gdom/getElement "app"))

(defn svg-of [suit]
  (case suit
    c [:svg {:class "club" :viewBox [0 0 1280 1280]}
       [:g [:path {:d ["M6210 12794 c-19 -2 -78 -9 -130 -15 -470 -53 -954 -260 -1350 -575 -108 -86 -335 -313 -424 -424 -415 -519 -646 -1177 -646 -1841 0 -749 276 -1472 957 -2507 56 -83 99 -152 96 -152 -3 0 -22 13 -42 29 -20 15 -90 64 -156 108 -460 306 -891 479 -1385 554 -175 27 -554 33 -705 11 -490 -71 -891 -234 -1265 -513 -729 -544 -1160 -1417 -1160 -2349 0 -932 431 -1805 1160 -2349 374 -279 777 -443 1265 -513 147 -21 492 -16 660 10 540 83 1041 298 1665 715 205 137 382 266 759 551 190 144 357 269 373 279 l28 19 0 -29 c0 -34 -34 -396 -55 -583 -138 -1232 -405 -1939 -921 -2440 -370 -359 -804 -578 -1514 -764 -48 -12 320 -14 2980 -14 2660 0 3028 2 2980 14 -710 186 -1144 405 -1514 764 -474 460 -734 1089 -880 2125 -41 289 -102 874 -94 911 2 12 31 -7 113 -76 322 -272 634 -509 915 -695 645 -428 1226 -670 1854 -772 618 -102 1311 83 1866 498 729 544 1160 1417 1160 2349 0 932 -431 1805 -1160 2349 -656 490 -1476 649 -2250 437 -352 -96 -706 -261 -1145 -531 -82 -51 -151 -92 -153 -90 -2 2 31 50 74 107 246 330 493 759 643 1114 240 571 363 1210 322 1673 -52 589 -275 1148 -637 1601 -89 111 -316 338 -424 424 -387 308 -827 500 -1315 572 -96 14 -472 27 -545 18z"]}]]]
    d [:svg {:class "diamond" :viewBox [0 0 3113 3603]}
       [:path {:d ["M1576.7-2.7l-15.4" "21.6c540" "752.2" "1091.8" "1327.5" "1550.8" "1776.5 c-465.8" "455.2-1028" "1040.8-1576.8" "1809.9l15.6-21.8l-16.2-22.5C1005.4" "2827.3" "465.6" "2263" "13.9" "1820.5L0.1" "1807 C461.1" "1356.4" "1016.6" "778.2" "1559.9" "20.8L1576.7-2.7z"]}]]
    h [:svg {:class "heart" :viewBox [0 0 1792 1792]}
       [:path {:d ["M896" "1664q-26" "0-44-18l-624-602q-10-8-27.5-26t-55.5-65.5-68-97.5-53.5-121-23.5-138q0-220" "127-344t351-124q62" "0" "126.5" "21.5t120" "58" "95.5" "68.5" "76" "68q36-36" "76-68t95.5-68.5" "120-58" "126.5-21.5q224" "0" "351" "124t127" "344q0" "221-229" "450l-623" "600q-18" "18-44" "18z"]}]]
    "default"))

(defn hello-world []
  [:div
   (svg-of 'c)
   (svg-of 'd)
   (svg-of 'h)
   [:ul
    (for [card @cards] [:p (svg-of (:suit card)) " " (:rank card)])]])

(defn mount [el]
  (reagent/render-component [hello-world] el))

(defn mount-app-element []
  (when-let [el (get-app-element)]
    (mount el)))

(mount-app-element)

(defn ^:after-load on-reload []
  (mount-app-element))
